<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OrbRPG Browser Preview - Test</title>
    <style>
        * { margin: 0; padding: 0; }
        body {
            background: #000;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        #canvas {
            width: 100%;
            height: 100vh;
            display: block;
        }
        #info {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 20px;
            border: 2px solid #d4af37;
            z-index: 10;
            max-width: 300px;
            font-size: 14px;
        }
        #info h2 {
            color: #d4af37;
            margin-bottom: 10px;
        }
        #status {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #d4af37;
            color: #aaa;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>Hybrid Editor Test</h2>
        <p>✓ Browser Preview Works!</p>
        <p>This page tests the browser-based preview system.</p>
        <div id="status">Loading Three.js...</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const statusEl = document.getElementById('status');
        
        try {
            // Create Three.js scene
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a1a);
            
            const camera = new THREE.PerspectiveCamera(
                75, 
                window.innerWidth / window.innerHeight, 
                0.1, 
                1000
            );
            camera.position.z = 5;
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // Create a test cube
            const geometry = new THREE.BoxGeometry(2, 2, 2);
            const material = new THREE.MeshPhongMaterial({ color: 0xd4af37 });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            // Add lighting
            const light = new THREE.PointLight(0xffffff, 1, 100);
            light.position.set(5, 5, 5);
            scene.add(light);
            
            scene.add(new THREE.AmbientLight(0x888888));
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
            
            // Handle resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            
            // Update status
            statusEl.innerHTML = `
                ✓ Three.js Loaded<br>
                ✓ WebGL Renderer Ready<br>
                ✓ Browser Preview Works!<br>
                <br>
                <strong>Next:</strong> Load your GLB model
            `;
            
            console.log('Three.js preview initialized successfully');
            console.log('Ready to load GLB models');
            
        } catch (err) {
            statusEl.innerHTML = `<span style="color: #ff6666;">✗ Error: ${err.message}</span>`;
            console.error('Preview error:', err);
        }
    </script>
</body>
</html>
