<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Module Diagnostic</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
    #console { background: #252526; padding: 15px; border-radius: 4px; max-height: 600px; overflow-y: auto; }
    .error { color: #f48771; }
    .success { color: #89d185; }
  </style>
</head>
<body>
  <h1>Module Import Diagnostic</h1>
  <p>This page will test which modules fail to load. Check the console below and browser DevTools.</p>
  <div id="console"></div>

  <script type="module">
    const consoleEl = document.getElementById('console');
    const oldLog = console.log;
    const oldError = console.error;

    console.log = function(...args) {
      oldLog(...args);
      const msg = args.join(' ');
      const line = document.createElement('div');
      line.textContent = msg;
      consoleEl.appendChild(line);
    };

    console.error = function(...args) {
      oldError(...args);
      const msg = args.join(' ');
      const line = document.createElement('div');
      line.className = 'error';
      line.textContent = '‚ùå ' + msg;
      consoleEl.appendChild(line);
    };

    console.log('üîç Starting diagnostic...\n');

    // Test each module
    const modules = [
      { name: 'util.js', path: './src/engine/util.js' },
      { name: 'constants.js', path: './src/game/constants.js' },
      { name: 'rarity.js', path: './src/game/rarity.js' },
      { name: 'progression.js', path: './src/game/progression.js' },
      { name: 'skills.js', path: './src/game/skills.js' },
      { name: 'world.js', path: './src/game/world.js' },
      { name: 'state.js', path: './src/game/state.js' },
      { name: 'game.js', path: './src/game/game.js' },
    ];

    let passed = 0;
    let failed = 0;

    for (const mod of modules) {
      try {
        console.log(`Testing ${mod.name}...`);
        await import(mod.path);
        console.log(`‚úì ${mod.name} loaded successfully\n`);
        passed++;
      } catch (e) {
        console.error(`${mod.name} FAILED: ${e.message}\n`);
        failed++;
      }
    }

    console.log(`\nüìä Results: ${passed} passed, ${failed} failed`);
  </script>
</body>
</html>
