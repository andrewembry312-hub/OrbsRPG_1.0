:root{
  --bg:#0b1020; --panel:#111a33; --text:#e8eeff; --muted:#aab6e8;
  --line:rgba(255,255,255,.10);
  --common:#ffffff; --uncommon:#3dff76; --rare:#4aa3ff; --epic:#b56cff; --legend:#ff9a2f;
  --hp:#ff6b6b; --mana:#4aa3ff; --shield:#b56cff; --stam:#7dff9b;
  --enemy:#ff6b6b; --player:#7dff9b; --friendly:#7aa2ff;
}

@keyframes cardRevealPop {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

*{box-sizing:border-box}
body{margin:0; background:radial-gradient(1200px 700px at 30% 0%, #121b3a 0%, var(--bg) 55%, #070a14 100%);
  color:var(--text); font-family:system-ui,Segoe UI,Arial; overflow:hidden;
}

/* MOBILE: Global scale - make EVERYTHING 50% size */
@media (max-width: 768px), (hover: none) {
  body {
    transform: scale(0.5);
    transform-origin: top left;
    width: 200vw;
    height: 200vh;
    overflow: hidden;
  }
}
canvas{display:block}
.hud{
  position:fixed; left:12px; top:12px; width:392px; padding:10px;
  background:rgba(0,0,0,.92); border:2px solid rgba(212,175,55,.5); border-radius:14px; backdrop-filter: blur(6px);
  box-shadow:0 0 18px rgba(212,175,55,.2);
}
.row{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap}
.small{font-size:12px; color:#b8941f}
.bar{height:12px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10); border-radius:999px; overflow:hidden}
.fill{height:100%}
.pill{font-size:12px; padding:3px 8px; border-radius:999px; border:1px solid rgba(212,175,55,.5); background:rgba(212,175,55,.15); color:#d4af37; font-weight:700;}
.hint{margin-top:8px; font-size:12px; color:var(--muted); line-height:1.35}
.kbd{display:inline-block; padding:2px 6px; border-radius:8px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); color:var(--text); font-weight:800; font-size:12px}

.toast{
  position:fixed; left:12px; top:120px; transform:none;
  padding:8px 12px; background:#000000; border:2px solid #ffd700;
  border-radius:4px; min-width:auto; max-width:480px;
  opacity:0; pointer-events:none; transition:opacity .18s ease, transform .18s ease;
  color:#ffd700; font-weight:500;
}
.toast.show{opacity:1; transform:none}

.overlay{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.75); backdrop-filter: blur(4px); z-index:1000; }
.overlay.show{display:grid}
.hud{ z-index:100 }
.abilBar, .bottomStats{ z-index:100 }
.buffIconsHud{ z-index:101 }

.panel{
  position:relative; z-index:1001;
  width:min(1100px,92vw); max-height:min(86vh,900px); overflow:auto;
  background:rgba(0,0,0,0.92); border:2px solid rgba(212,175,55,0.5); border-radius:18px;
  box-shadow:0 20px 70px rgba(212,175,55,0.35);
  padding:14px;
}
#escOverlay .panel{
  background:#000000; border:2px solid #d4af37; box-shadow:0 20px 70px rgba(212,175,55,0.35);
}
#escOverlay h2{
  color:#d4af37; text-shadow:0 0 12px rgba(212,175,55,0.4);
}
#escOverlay .box{
  background:rgba(5,5,5,0.75); border:2px solid rgba(212,175,55,0.35); box-shadow:0 0 12px rgba(212,175,55,0.18);
}
#escOverlay button{
  border:1px solid #d4af37; background:#1a1a1a; color:#d4af37; font-weight:900;
}
#escOverlay button:hover{
  background:#2a2a2a; outline:2px solid #d4af37;
}
#escOverlay .small{
  color:#b8860b;
}
#escOverlay label{
  color:#d4af37;
}
#escOverlay input[type="checkbox"],
#escOverlay input[type="radio"]{
  accent-color:#d4af37;
}
#escOverlay .bindRow{
  background:rgba(212,175,55,.08); border:1px solid #d4af37;
}
.overlay#invOverlay{ place-items:stretch; }
#invOverlay .panel{ width:100vw; height:100vh; max-height:none; border:2px solid #fff; border-radius:0; background:#000; padding:16px; overflow:hidden; }

.invFullGrid{ display:grid; grid-template-columns: 1.05fr 0.8fr 1.3fr; gap:16px; height: calc(100vh - 120px); }
.invLeft, .invRight, .invStats, .invSpacer{ height:100%; background:#0a0a0a; border:2px solid rgba(212,175,55,0.6); }
.invLeft, .invStats{ overflow:hidden; }
.invRight{ position:relative; display:flex; flex-direction:column; overflow:auto; }
.invRight .invGrid{ flex:1 1 auto; }
.invRightHeader{ position:sticky; top:0; background:#0a0a0a; border-bottom:2px solid rgba(212,175,55,0.6); z-index:2; padding:8px; box-shadow:0 2px 8px rgba(212,175,55,0.15); }
.invRight.scrolled .invRightHeader{ box-shadow:0 8px 18px rgba(212,175,55,0.25); }
.invRightHeader::after{
  content:""; position:absolute; left:0; right:0; bottom:-1px; height:14px; pointer-events:none;
  background:linear-gradient(to bottom, rgba(212,175,55,0.2), rgba(212,175,55,0)); opacity:0; transition:opacity .15s ease;
}
.invRight.scrolled .invRightHeader::after{ opacity:1; }

/* Shared scroll container for tall tab sections */
.tab-scroll{ overflow-y:auto; max-height: calc(100vh - 220px); }
.invSpacer{ background:transparent; border-color:transparent; }
.invStats{ display:flex; flex-direction:column; padding:10px; }
.invLeft{ display:flex; flex-direction:column; }
.heroLarge{ width:280px; height:360px; border-radius:12px; outline:3px solid rgba(212,175,55,0.8); object-fit:cover; margin-top:60px; box-shadow:0 0 20px rgba(212,175,55,0.3); }
.equipCircle{ position:relative; display:flex; align-items:center; justify-content:center; padding:12px; width:480px; height:480px; margin:0 auto; }
.equipSlot{ position:absolute; width:70px; height:70px; border-radius:8px; border:2px solid #fff; background:#111; display:flex; align-items:center; justify-content:center; font-size:9px; font-weight:900; color:#fff; cursor:pointer; user-select:none; padding:2px; }
.equipSlot:hover{ outline:2px solid rgba(122,162,255,.5); }
.equipSlot.active{ outline:2px solid rgba(122,162,255,.8); }
.equipExtras{ margin-top:16px; display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; }
.equipSlot{ position:absolute; width:70px; height:70px; border-radius:8px; border:2px solid rgba(212,175,55,0.6); background:#111; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:9px; font-weight:900; color:#d4af37; cursor:pointer; user-select:none; padding:4px; }
.equipSlot:hover{ outline:2px solid rgba(212,175,55,0.9); box-shadow:0 0 12px rgba(212,175,55,0.3); }
.equipSlot.active{ outline:2px solid #ffd700; box-shadow:0 0 18px rgba(255,215,0,0.5); }
.equip-row{ width:100%; height:70px; border-radius:8px; border:2px solid rgba(212,175,55,0.6); background:#111; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:9px; font-weight:900; color:#d4af37; cursor:pointer; user-select:none; padding:4px; }
.equip-row:hover{ outline:2px solid rgba(212,175,55,0.9); box-shadow:0 0 12px rgba(212,175,55,0.3); }
.equip-row.active{ outline:2px solid #ffd700; box-shadow:0 0 18px rgba(255,215,0,0.5); }
.equip-row .label{ font-size:8px; color:#b8941f; margin-bottom:2px; }
.equip-row .value{ font-size:10px; text-align:center; }

.invGrid{display:grid; grid-template-columns: repeat(6, 1fr); gap:8px}
.slot{
  height:100px; border-radius:12px; border:1px solid #fff;
  background:#111; display:flex; align-items:center; justify-content:center;
  cursor:pointer; user-select:none; font-weight:900; font-size:12px; text-align:center; padding:2px; color:#fff;
}
.slot:hover{outline:2px solid rgba(122,162,255,.35)}
.panel h2{margin:0 0 8px; font-size:18px}

.grid2{display:grid; grid-template-columns: 1.1fr 0.9fr; gap:12px}
.box{background:rgba(5,5,5,0.75); border:2px solid rgba(212,175,55,0.35); border-radius:14px; padding:10px; box-shadow:0 0 12px rgba(212,175,55,0.18);}

.invGrid{display:grid; grid-template-columns: repeat(6, 1fr); gap:8px}
.slot{
  height:100px; border-radius:12px; border:2px solid rgba(212,175,55,0.4);
  background:rgba(5,5,5,0.9); display:flex; align-items:center; justify-content:center;
  cursor:pointer; user-select:none; font-weight:900; font-size:12px; text-align:center; padding:2px; color:#d4af37;
}
.slot:hover{outline:2px solid rgba(212,175,55,0.8); box-shadow:0 0 12px rgba(212,175,55,0.25);}
.btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
button{
  cursor:pointer; padding:10px 12px; border-radius:12px; border:2px solid rgba(212,175,55,0.7);
  background:rgba(5,5,5,0.9); color:#d4af37; font-weight:900;
}
button:hover{
  background:rgba(20,20,10,0.95); outline:2px solid rgba(212,175,55,0.9); box-shadow:0 0 12px rgba(212,175,55,0.3);
}
button.secondary{background:rgba(10,10,10,0.8); border-color:rgba(212,175,55,0.5); color:#b8941f;}
button.secondary:hover{background:rgba(15,15,10,0.9); outline:2px solid rgba(212,175,55,0.7);}
button.danger{background:rgba(45,5,5,0.8); border-color:rgba(255,107,107,0.7); color:#ff6b6b;}
button.danger:hover{background:rgba(60,10,10,0.9); outline:2px solid rgba(255,107,107,0.9);}
.statTable{width:100%; border-collapse:collapse; font-size:13px}
.statTable td{padding:6px 4px; border-bottom:1px solid rgba(255,255,255,.08)}
.pos{color:#7dff9b; font-weight:900}
.neg{color:#ff7d7d; font-weight:900}

.rarCommon{color:var(--common)} .rarUncommon{color:var(--uncommon)} .rarRare{color:var(--rare)} .rarEpic{color:var(--epic)} .rarLegend{color:var(--legend)}

.gold-icon{margin-right:4px; color:#f6c344; filter:drop-shadow(0 0 4px rgba(246,195,68,.35));}
.gold-amount{font-weight:900;}

.group-actions{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px;}
.group-actions button{padding:6px 10px; font-size:11px;}

.equip-row{padding:6px 8px; border-radius:10px; border:1px solid rgba(255,255,255,.08); display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; background:rgba(0,0,0,.12); cursor:pointer; transition:background .12s ease, outline .12s ease;}
.equip-row:hover{background:rgba(122,162,255,.10);}
.equip-row.active{outline:2px solid rgba(122,162,255,.5); background:rgba(122,162,255,.12);}
.equip-row .label{color:#aab6e8; font-weight:800; font-size:12px;}
.equip-row .value{font-weight:900; font-size:12px;}

/* Group tab Dense mode */
.group-dense #groupMembersList{ grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) !important; gap:6px !important; }
.group-dense .group-card{ padding:6px !important; }
.group-dense .group-card .small{ font-size:11px !important; }
.group-dense .group-card .pill{ font-size:11px !important; padding:2px 6px !important; }

.abilBar{
  position:fixed; left:50%; bottom:12px; transform:translateX(-50%);
  display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:nowrap;
  padding:10px 12px; border-radius:18px;
  background:rgba(0,0,0,.92); border:2px solid rgba(212,175,55,.5); backdrop-filter: blur(6px);
  box-shadow:0 0 18px rgba(212,175,55,.2);
  width:min(1120px,98vw); overflow-x:auto;
}
.abilBar .abilSlot{ flex:0 0 auto }
.bottomStats{
  position:fixed; left:50%; bottom:86px; transform:translateX(-50%);
  display:flex; gap:10px; align-items:center; justify-content:center;
  padding:8px 12px; border-radius:12px;
  background:rgba(0,0,0,.92); border:2px solid rgba(212,175,55,.5); backdrop-filter: blur(6px);
  box-shadow:0 0 18px rgba(212,175,55,.2);
  width:min(920px,92vw);
}
.bottomStats .statBox{ display:flex; flex-direction:column; gap:6px }
.abilSlot{
  width:160px; height:56px; border-radius:14px;
  border:2px solid rgba(212,175,55,0.4);
  background:rgba(5,5,5,0.9);
  padding:8px;
  position:relative;
  overflow:hidden;
}
.abilKey{
  position:absolute; top:6px; left:8px;
  font-size:12px; font-weight:900; color:#d4af37;
  padding:2px 6px; border-radius:10px; background:rgba(0,0,0,.5); border:1px solid rgba(212,175,55,.4);
}
.abilName{font-weight:900; font-size:12px; margin-top:16px; color:#d4af37;}
.abilMeta{font-size:11px; color:var(--muted); margin-top:2px}
.cdOverlay{ position:absolute; inset:0; background:rgba(0,0,0,.55); display:none; }
.cdText{
  position:absolute; right:8px; top:6px;
  font-weight:900; font-size:12px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
  padding:2px 6px; border-radius:10px; display:none;
}

.bindRow{
  display:flex; gap:10px; align-items:center; justify-content:space-between;
  padding:8px; border-radius:12px; border:1px solid rgba(212,175,55,0.4); background:rgba(5,5,5,0.75);
  margin-top:8px;
}
.bindRow button{padding:8px 10px}
.tag{
  display:inline-block; font-size:11px; font-weight:900;
  padding:2px 7px; border-radius:999px;
  border:1px solid rgba(212,175,55,0.4);
  background:rgba(212,175,55,0.12);
  color:#d4af37;
}

/* Effect pill styling for target inspection */
.effectPills{display:flex; flex-wrap:wrap; gap:4px; align-items:flex-start; line-height:1.2;}
.effect-pill{display:inline-flex; align-items:center; gap:8px; padding:4px 8px; margin:2px; border-radius:10px; border:2px solid rgba(212,175,55,0.3); background:rgba(0,0,0,0.85); color:#fff; font-size:11px; box-shadow:0 0 12px rgba(212,175,55,0.15);}
.effect-pill .effect-icon{width:16px; height:16px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-size:10px; font-weight:900; color:#000; box-shadow:0 0 0 1px rgba(212,175,55,0.4);}
.effect-pill .effect-text{display:flex; flex-direction:column; gap:2px;}
.effect-pill .effect-label{display:flex; align-items:center; gap:6px; font-weight:800; color:#d4af37;}
.effect-pill .effect-sub{color:#b8941f; font-weight:400;}
.effect-pill .effect-stack{padding:0 4px; border-radius:6px; background:rgba(212,175,55,0.25); color:#ffd700; font-size:10px; font-weight:900;}
.effect-pill.hot{border-color:rgba(122,162,255,.7);} .effect-pill.hot .effect-icon{background:rgba(122,162,255,.82);}
.effect-pill.dot{border-color:rgba(255,120,120,.75);} .effect-pill.dot .effect-icon{background:rgba(255,120,120,.9);}
.effect-pill.buff{border-color:rgba(120,255,160,.75);} .effect-pill.buff .effect-icon{background:rgba(120,255,160,.85);}

/* Ability pills */
.ability-pill{display:inline-flex; align-items:center; gap:8px; padding:4px 8px; margin:2px; border-radius:10px; border:2px solid rgba(212,175,55,0.3); background:rgba(0,0,0,0.85); color:#fff; font-size:11px; box-shadow:0 0 12px rgba(212,175,55,0.15);}
.ability-pill .ability-icon{width:16px; height:16px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-size:10px; font-weight:900; color:#000; box-shadow:0 0 0 1px rgba(212,175,55,0.4);}
.ability-pill .ability-text{display:flex; flex-direction:column; gap:2px;}
.ability-pill .ability-label{display:flex; align-items:center; gap:6px; font-weight:800; color:#d4af37;}
.ability-pill .ability-sub{color:#b8941f; font-weight:400;}
.ability-pill.ability-ready{border-color:rgba(120,255,160,.75);} .ability-pill.ability-ready .ability-icon{background:rgba(120,255,160,.85);}
.ability-pill.ability-cooldown{border-color:rgba(255,120,120,.4);} .ability-pill.ability-cooldown .ability-icon{background:rgba(255,120,120,.5);} .ability-pill.ability-cooldown .ability-label{color:#888;} .ability-pill.ability-cooldown .ability-sub{color:#666;}

/* HUD Buff/Debuff Icons Bar */
.buffIconsHud{
  position:fixed; left:50%; bottom:120px; transform:translateX(-50%);
  display:flex; gap:4px; align-items:center; justify-content:flex-start; flex-wrap:wrap;
  padding:0; border-radius:12px;
  background:transparent; border:none; backdrop-filter:none;
  width:min(920px,92vw);
}
.buffIcon{
  position:relative; width:64px; height:64px; border-radius:6px;
  display:inline-flex; align-items:center; justify-content:center;
  font-size:28px; font-weight:900; color:#000;
  border:2px solid #d4af37;
  background:rgba(0,0,0,.82);
  box-shadow:0 0 8px rgba(212,175,55,.4);
  padding:2px;
}
.buffIcon img{ width:100%; height:100%; border-radius:4px; object-fit:cover; display:block; }
.buffIcon.buff{ background:rgba(0,20,0,.92); border-color:#4caf50; box-shadow:0 0 8px rgba(76,175,80,.5); }
.buffIcon.debuff{ background:rgba(30,0,0,.92); border-color:#f44; box-shadow:0 0 8px rgba(255,68,68,.5); }
.buffIcon.passive{ background:rgba(0,10,30,.92); border-color:#7aa2ff; box-shadow:0 0 8px rgba(122,162,255,.5); }
.buffIcon.emperor{ background:linear-gradient(135deg, rgba(255,215,0,0.3) 0%, rgba(218,165,32,0.2) 100%); border-color:#ffd700 !important; box-shadow:0 0 12px rgba(255,215,0,0.8) !important; }
.buffIcon .timer{
  position:absolute; right:-3px; bottom:-3px; font-size:10px; font-weight:800;
  color:#ffd700; background:rgba(0,0,0,.85); border:1px solid rgba(212,175,55,.6);
  padding:2px 4px; border-radius:3px;
}
.buffIcon .stack{
  position:absolute; left:-3px; top:-3px; font-size:10px; font-weight:900;
  color:#ffd700; background:rgba(0,0,0,.85); border:1px solid rgba(212,175,55,.6);
  padding:2px 4px; border-radius:3px;
}
.buffIcon:hover{ filter:brightness(1.15); box-shadow:0 0 12px rgba(212,175,55,.7); }

/* Styled tooltip for buff icons */
.buffTooltip{
  position:fixed; z-index:1002; display:none;
  background:rgba(0,0,0,0.96); border:2px solid rgba(212,175,55,0.6);
  border-radius:10px; padding:8px 10px; max-width:280px;
  color:#fff; font-size:11px; box-shadow:0 10px 28px rgba(212,175,55,0.35);
  pointer-events:none;
}
.buffTooltip .title{ font-weight:900; margin-bottom:3px; color:#d4af37; }
.buffTooltip .sub{ color:#b8941f; }

/* XP Progress Bar Shimmer Animation */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Custom Scrollbar Styling - Gold and Black Theme */
/* WebKit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: #000000;
  border: 1px solid #d4af37;
  border-radius: 6px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #d4af37 0%, #b8941f 100%);
  border: 2px solid #000000;
  border-radius: 6px;
  box-shadow: 0 0 8px rgba(212, 175, 55, 0.5);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #ffd700 0%, #d4af37 100%);
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.7);
}

::-webkit-scrollbar-thumb:active {
  background: #ffd700;
}

::-webkit-scrollbar-corner {
  background: #000000;
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #d4af37 #000000;
}

/* ============================================
   MOBILE UI STYLES - Complete Touch Control System
   ============================================ */

/* Mobile UI Container - FIXED position unaffected by body scale */
#mobileUIContainer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 200;
}

/* Mobile Action Buttons (A/B/X/Y style - bottom right) */
.mobile-action-container {
  position: fixed;
  bottom: 8px;
  right: 8px;
  width: 120px;
  height: 120px;
  z-index: 300;
  pointer-events: none;
}

.mobile-action-btn {
  position: absolute;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6), 0 0 12px var(--btn-color, #fff);
  cursor: pointer;
  transition: all 0.1s ease;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: all;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.mobile-action-btn .action-emoji {
  font-size: 16px;
  margin-bottom: 1px;
  filter: drop-shadow(0 0 2px var(--btn-color));
}

.mobile-action-btn .action-label {
  font-size: 8px;
  font-weight: 900;
  color: var(--btn-color);
  text-shadow: 0 0 4px var(--btn-color);
}

.mobile-action-btn:active,
.mobile-action-btn.active {
  transform: translate(-50%, -50%) scale(0.85);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.8), inset 0 0 10px var(--btn-color);
  background: rgba(0, 0, 0, 0.95);
}

/* Mobile Ability Bar (horizontal at top) */
.mobile-ability-bar {
  position: fixed;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 4px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.85);
  border: 1px solid rgba(212, 175, 55, 0.5);
  border-radius: 8px;
  backdrop-filter: blur(6px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  z-index: 250;
}

.mobile-ability-btn {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  border: 1px solid rgba(212, 175, 55, 0.6);
  background: rgba(10, 10, 10, 0.9);
  color: #d4af37;
  font-size: 14px;
  font-weight: 900;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
  cursor: pointer;
  transition: all 0.12s ease;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  padding: 0;
}

.mobile-ability-btn:active,
.mobile-ability-btn.active {
  transform: scale(0.85);
  background: rgba(212, 175, 55, 0.2);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.6), inset 0 0 8px rgba(212, 175, 55, 0.4);
}

.mobile-ability-btn.on-cooldown {
  opacity: 0.3;
  border-color: #444;
  color: #555;
}

/* Mobile Menu Buttons (top-left corner) */
.mobile-menu-buttons {
  position: fixed;
  top: 8px;
  left: 8px;
  display: flex;
  gap: 4px;
  z-index: 250;
}

.mobile-menu-btn {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  border: 1px solid rgba(74, 163, 255, 0.6);
  background: rgba(0, 0, 0, 0.85);
  color: #4aa3ff;
  font-size: 16px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
  cursor: pointer;
  transition: all 0.12s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  padding: 0;
}

.mobile-menu-btn:active {
  transform: scale(0.85);
  background: rgba(74, 163, 255, 0.2);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.6), inset 0 0 8px rgba(74, 163, 255, 0.4);
}

/* Mobile Responsive Adjustments - AGGRESSIVE SCALING */
@media (max-width: 768px), (hover: none) {
  /* Hide desktop HUD elements to save space */
  .hud {
    width: 200px !important;
    padding: 4px !important;
    font-size: 8px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    top: 60px !important;
    max-width: 85vw !important;
  }

  .hud .row {
    gap: 4px !important;
  }

  .hud .bar {
    height: 8px !important;
  }

  .hud .small {
    font-size: 8px !important;
  }

  /* Bottom ability bar - hide on mobile (replaced by mobile ability bar) */
  .abilBar {
    display: none !important;
  }

  /* Bottom stats - ultra compact */
  .bottomStats {
    bottom: 8px !important;
    padding: 2px 4px !important;
    font-size: 7px !important;
    gap: 4px !important;
  }

  .bottomStats .bar {
    height: 6px !important;
  }

  .bottomStats .pill {
    font-size: 7px !important;
    padding: 1px 4px !important;
  }

  /* Buff icons - tiny */
  .buffIconsHud {
    bottom: 40px !important;
    gap: 2px !important;
  }

  .buffIcon {
    width: 24px !important;
    height: 24px !important;
    font-size: 12px !important;
  }

  .buffIcon .timer,
  .buffIcon .stack {
    font-size: 6px !important;
    padding: 1px 2px !important;
  }

  /* Minimap - tiny */
  #miniMap {
    width: 80px !important;
    height: 80px !important;
    bottom: 8px !important;
    left: 8px !important;
  }

  /* Toast messages - top center, small */
  .toast {
    left: 50% !important;
    transform: translateX(-50%) !important;
    top: 120px !important;
    font-size: 9px !important;
    max-width: 75vw !important;
    padding: 6px 10px !important;
  }

  /* Overlays - full screen */
  .overlay .panel {
    width: 100vw !important;
    height: 100vh !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    padding: 8px !important;
    font-size: 12px !important;
  }

  /* Character select overlay - very compact */
  #charSelectOverlay .panel {
    padding: 4px !important;
  }

  #charSelectOverlay h2 {
    font-size: 14px !important;
    margin-bottom: 4px !important;
  }

  #charSelectOverlay button {
    padding: 8px 12px !important;
    font-size: 11px !important;
    min-height: 36px !important;
  }

  #charSelectOverlay input {
    padding: 6px !important;
    font-size: 12px !important;
  }

  /* Panels - smaller on mobile */
  .panel h2 {
    font-size: 14px !important;
    margin-bottom: 4px !important;
  }

  .panel {
    padding: 8px !important;
    font-size: 11px !important;
  }

  /* Button styles - touch friendly but smaller */
  button {
    min-height: 36px !important;
    padding: 6px 10px !important;
    font-size: 11px !important;
  }

  /* Input fields */
  input, select, textarea {
    font-size: 14px !important;
    min-height: 36px !important;
    padding: 6px !important;
  }

  /* Inventory grid - compact */
  .invSlot {
    min-width: 50px !important;
    min-height: 50px !important;
    font-size: 9px !important;
  }

  /* Ability slots */
  .abilSlot {
    width: 120px !important;
    height: 44px !important;
    padding: 6px !important;
  }

  .abilName {
    font-size: 10px !important;
    margin-top: 8px !important;
  }

  .abilMeta {
    font-size: 9px !important;
  }

  .abilKey {
    font-size: 10px !important;
  }
}

/* Landscape mode - ULTRA AGGRESSIVE */
@media (max-width: 900px) and (orientation: landscape) {
  .hud {
    top: 8px !important;
    width: 160px !important;
    font-size: 7px !important;
    padding: 2px !important;
  }

  .mobile-ability-bar {
    top: 4px !important;
    padding: 2px 6px !important;
    gap: 2px !important;
  }

  .mobile-ability-btn {
    width: 28px !important;
    height: 28px !important;
    font-size: 12px !important;
  }

  .mobile-action-container {
    width: 100px !important;
    height: 100px !important;
    bottom: 4px !important;
    right: 4px !important;
  }

  .mobile-action-btn {
    width: 32px !important;
    height: 32px !important;
  }

  .mobile-action-btn .action-emoji {
    font-size: 14px !important;
  }

  .mobile-menu-btn {
    width: 28px !important;
    height: 28px !important;
    font-size: 14px !important;
  }

  .buffIcon {
    width: 20px !important;
    height: 20px !important;
  }

  #miniMap {
    width: 60px !important;
    height: 60px !important;
  }

  .bottomStats {
    font-size: 6px !important;
    padding: 2px !important;
  }
}

/* Safe area padding for notched devices (iPhone X+, etc.) */
@supports (padding: env(safe-area-inset-bottom)) {
  .mobile-action-container {
    bottom: calc(8px + env(safe-area-inset-bottom)) !important;
    right: calc(8px + env(safe-area-inset-right)) !important;
  }

  .mobile-menu-buttons {
    top: calc(8px + env(safe-area-inset-top)) !important;
    left: calc(8px + env(safe-area-inset-left)) !important;
  }

  .mobile-ability-bar {
    top: calc(8px + env(safe-area-inset-top)) !important;
  }

  #miniMap {
    bottom: calc(8px + env(safe-area-inset-bottom)) !important;
    left: calc(8px + env(safe-area-inset-left)) !important;
  }
}

/* Mobile-specific styles */
@media (max-width: 768px), (hover: none) {
  /* Scale HUD for mobile - more compact */
  .hud {
    width: 85vw !important;
    max-width: 350px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    top: 4px !important;
    padding: 6px !important;
    font-size: 11px !important;
  }

  /* Larger touch-friendly buttons */
  button {
    min-height: 44px;
    font-size: 14px;
    padding: 12px 16px !important;
  }

  /* Compact ability bar for mobile - smaller and centered */
  .abilBar {
    bottom: 4px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    gap: 4px !important;
    padding: 4px 6px !important;
    max-width: 90vw !important;
  }

  .abilBtn {
    width: 40px !important;
    height: 40px !important;
    font-size: 11px !important;
    padding: 2px !important;
  }

  /* Minimap - much smaller on mobile */
  #miniMap {
    width: 120px !important;
    height: 120px !important;
    right: 4px !important;
    top: 4px !important;
  }

  /* Hide cooldown numbers on mobile ability buttons - show icon only */
  .abilBar .small {
    display: none !important;
  }

  /* Mobile-friendly panels */
  .panel {
    width: 95vw;
    max-height: 85vh;
    padding: 12px;
    font-size: 14px;
  }

  /* Enlarge input fields for mobile */
  input, select, textarea {
    font-size: 16px !important; /* Prevents zoom on iOS */
    min-height: 44px;
  }

  /* Hide non-essential UI elements on mobile */
  .hint {
    display: none;
  }

  /* Bottom stats bar - compact for mobile */
  .bottomStats {
    font-size: 10px !important;
    padding: 4px !important;
    gap: 4px !important;
  }

  .bottomStats .pill {
    padding: 2px 6px !important;
    font-size: 10px !important;
  }

  /* Buff icons - smaller on mobile */
  .buffIconsHud {
    top: auto !important;
    bottom: 52px !important;
    right: 4px !important;
    max-width: 200px !important;
  }

  .buffIcon {
    width: 28px !important;
    height: 28px !important;
  }

  /* Inventory grid - larger touch targets */
  .inventoryGrid {
    gap: 12px !important;
  }

  .invSlot {
    min-width: 60px !important;
    min-height: 60px !important;
  }

  /* Toast notifications - larger for mobile */
  .toast {
    font-size: 14px;
    padding: 12px 16px;
    max-width: 90vw;
    left: 50% !important;
    transform: translateX(-50%) !important;
  }

  /* Character select - stack vertically on mobile */
  #charSelectOverlay > div > div {
    flex-direction: column !important;
    gap: 20px !important;
  }

  /* Hide mobile ability buttons when UI is hidden */
  body.ui-hidden #mobileAbilityButtons {
    display: none !important;
  }
}

/* Landscape mobile devices */
@media (max-width: 900px) and (orientation: landscape) {
  .hud {
    width: 280px !important;
    font-size: 10px !important;
    padding: 4px !important;
  }

  .abilBar {
    bottom: 2px !important;
    padding: 3px 5px !important;
  }

  .abilBtn {
    width: 36px !important;
    height: 36px !important;
  }

  #miniMap {
    width: 100px !important;
    height: 100px !important;
  }

  .panel {
    max-height: 75vh;
  }
}

/* Prevent text selection on mobile (interferes with touch controls) */
@media (hover: none) {
  body {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Allow selection in input fields */
  input, textarea {
    -webkit-user-select: text;
    user-select: text;
  }
}
